#:kivy 2.0.0
# account_creation_view.kv

<RegisterScreen>:
    name: 'register_screen'
    id: register_screen

    canvas.before:
        Color:
            rgba: self.background_color
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
              

        BoxLayout:
            orientation: 'vertical'
            padding: [dp(20), dp(20)]
            spacing: dp(20)


            BoxLayout:
                size_hint_y: 0.9
                canvas:
                    Color:
                        rgb: 1, 1, 1
                    Ellipse:
                        pos: (self.center_x - dp(75), self.top - dp(160))
                        size: dp(150), dp(150)
                        source: 'assets/images/la_logo.webp'
                        angle_start: 0
                        angle_end: 360

 

            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.7
                padding: [dp(10), dp(10)]
                spacing: dp(10)


                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(23)]  

                    TextInput:
                        id: name_input
                        hint_text: 'Name *'
                        multiline: False
                        font_size: sp(19)
                        size_hint_y: None
                        height: dp(45)
                        background_normal: ''
                        background_active: ''
                        background_color: 1, 1, 1, 1
                        background_color: (0, 0, 0, 0)
                        padding: [dp(20), dp(12)]
                        cursor_color: 0.87, 0.42, 0.16, 1
                        selection_color: 0.87, 0.42, 0.16, 0.5


                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(23)]  

                    TextInput:
                        id: lastname_input
                        hint_text: 'Last Name *'
                        multiline: False
                        font_size: sp(19)
                        size_hint_y: None
                        height: dp(45)
                        background_normal: ''
                        background_active: ''
                        background_color: 1, 1, 1, 1
                        background_color: (0, 0, 0, 0)
                        padding: [dp(20), dp(12)]
                        cursor_color: 0.87, 0.42, 0.16, 1
                        selection_color: 0.87, 0.42, 0.16, 0.5
                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(23)]  

                    TextInput:
                        id: birthdate_input
                        hint_text: 'Birthdate  (13.06.1998)*'
                        multiline: False
                        font_size: sp(19)
                        size_hint_y: None
                        height: dp(45)
                        background_normal: ''
                        background_active: ''
                        background_color: 1, 1, 1, 1
                        background_color: (0, 0, 0, 0)
                        padding: [dp(20), dp(12)]
                        cursor_color: 0.87, 0.42, 0.16, 1
                        selection_color: 0.87, 0.42, 0.16, 0.5


                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_x: 0.8
                        pos_hint: {'center_x': 0.5}
                        size_hint_y: None
                        height: dp(50)  
                        spacing: dp(10)

                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1  
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(23)]  
                   
                        ToggleButton:
                            id: gender_m
                            text: 'Male'
                            group: 'gender'
                            font_size: sp(20)
                            size_hint_x: 0.3
                            background_normal: ''
                            background_down: ''
                            background_color: 1, 1, 1, 1  
                            color: 0.8, 0.4, 0.1, 1  
                            background_down: ''  
                            on_state: 
                                self.background_color = (0.8, 0.4, 0.1, 1) if self.state == 'down' else (1, 1, 1, 1)
                                self.color = (1, 1, 1, 1) if self.state == 'down' else (0.8, 0.4, 0.1, 1)   
                                root.set_gender('M')
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_x: 0.8
                        pos_hint: {'center_x': 0.5}
                        size_hint_y: None
                        height: dp(50)  
                        spacing: dp(10)

                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1  
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(23)]  
                   
                        ToggleButton:
                            id: gender_f
                            text: 'Female'
                            font_size: sp(20)
                            group: 'gender'
                            size_hint_x: 0.3
                            background_normal: ''
                            background_down: ''
                            background_color: 1, 1, 1, 1 
                            color: 0.8, 0.4, 0.1, 1  
                            background_down: ''  
                            on_state: 
                                self.background_color = (0.8, 0.4, 0.1, 1) if self.state == 'down' else (1, 1, 1, 1)
                                self.color = (1, 1, 1, 1) if self.state == 'down' else (0.8, 0.4, 0.1, 1)  
                                root.set_gender('F')
                    
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_x: 0.8
                        pos_hint: {'center_x': 0.5}
                        size_hint_y: None
                        height: dp(50)  
                        spacing: dp(10)

                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1  
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(23)]  

                        TextInput:
                            id: city_input
                            hint_text: 'City *'
                            multiline: False
                            font_size: sp(19)
                            size_hint_y: None
                            height: dp(45)
                            background_normal: ''
                            background_active: ''
                            background_color: 1, 1, 1, 1
                            background_color: (0, 0, 0, 0)
                            padding: [dp(20), dp(12)]
                            cursor_color: 0.87, 0.42, 0.16, 1
                            selection_color: 0.87, 0.42, 0.16, 0.5
                            size_hint_x: 0.5

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_x: 0.8
                        pos_hint: {'center_x': 0.5}
                        size_hint_y: None
                        height: dp(50)  
                        spacing: dp(10)
                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1  
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(23)] 
                        TextInput:
                            id: house_number_input
                            hint_text: 'House *'
                            multiline: False
                            font_size: sp(19)
                            size_hint_y: None
                            height: dp(45)
                            background_normal: ''
                            background_active: ''
                            background_color: 1, 1, 1, 1
                            background_color: (0, 0, 0, 0)
                            padding: [dp(20), dp(12)]
                            cursor_color: 0.87, 0.42, 0.16, 1
                            selection_color: 0.87, 0.42, 0.16, 0.5
                            size_hint_x: 0.5

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_x: 0.8
                        pos_hint: {'center_x': 0.5}
                        size_hint_y: None
                        height: dp(50)  
                        spacing: dp(10)

                        canvas.before:
                            Color:
                                rgba: 1, 1, 1, 1  
                            RoundedRectangle:
                                pos: self.pos
                                size: self.size
                                radius: [dp(23)]  

                        TextInput:
                            id: postal_code_input
                            hint_text: 'Postal Code *'
                            multiline: False
                            font_size: sp(16)
                            size_hint_y: None
                            height: dp(45)
                            background_normal: ''
                            background_active: ''
                            background_color: 1, 1, 1, 1
                            background_color: (0, 0, 0, 0)
                            padding: [dp(20), dp(12)]
                            cursor_color: 0.87, 0.42, 0.16, 1
                            selection_color: 0.87, 0.42, 0.16, 0.5
                            size_hint_x: 0.5
                            on_text: root.check_postal_code(self.text)

                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_x: 0.8
                        pos_hint: {'center_x': 0.5}
                        size_hint_y: None
                        height: dp(50)  
                        spacing: dp(10)

                        Label:
                            id: street_label
                            text: "Your street name will be here"
                            color: 1, 1, 1, 1  
                            font_size: sp(16)
                            size_hint_y: None
                            height: dp(40)
                            valign: 'middle'
                            text_size: self.size

                BoxLayout:
                    orientation: 'vertical'
                    size_hint_x: 0.8
                    pos_hint: {'center_x': 0.5}
                    size_hint_y: None
                    height: dp(50)  
                    spacing: dp(10)

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(23)]  

                    TextInput:
                        id: phone_number_input
                        hint_text: 'Phone Number *'
                        multiline: False
                        font_size: sp(19)
                        size_hint_y: None
                        height: dp(45)
                        background_normal: ''
                        background_active: ''
                        background_color: 1, 1, 1, 1
                        background_color: (0, 0, 0, 0)
                        padding: [dp(20), dp(12)]
                        cursor_color: 0.87, 0.42, 0.16, 1
                        selection_color: 0.87, 0.42, 0.16, 0.5
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: 0.35
                spacing: dp(15)
                Label:
                    id: error_label
                    text: ""
                    color: 1, 1, 1, 1
                    font_size: sp(15)
                    size_hint_y: None
                    height: dp(30)
                    pos_hint: {'center_x': 0.5}
                Button:
                    text: 'Continue'
                    size_hint_x: 0.77
                    size_hint_y: None
                    height: dp(50)
                    font_size: sp(20)
                    background_normal: ''
                    background_color: 0, 0, 0, 0  
                    color: 0.8, 0.4, 0.1, 1
                    pos_hint: {'center_x': 0.5}
                    on_release: root.continue_to_account_creation()
                        

                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [dp(23)]  
                Button:
                    text: 'Back'
                    size_hint_x: 0.77
                    size_hint_y: None
                    height: dp(50)  
                    font_size: sp(20)
                    background_normal: ''
                    background_color: 0, 0, 0, 0  
                    color: 1, 1, 1, 1  
                    pos_hint: {'center_x': 0.5}
                    on_release: app.root.current = 'login_screen'


                    canvas.before:
                        Color:
                            rgba: 1, 1, 1, 1  
                        Line:
                            width: 1.2  
                            rounded_rectangle: (self.x, self.y, self.width, self.height, dp(23)) 

            